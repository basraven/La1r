<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Event Specifications"><meta property="og:title" content><meta property="og:description" content><meta property="og:type" content="website"><meta property="og:url" content="https://la1r.com/docs/capability-architecture/event-specifications/"><title>Event Specifications | La1r</title><link rel=icon href=/favicon.ico type=image/x-icon><link rel=stylesheet href=/book.min.9d4a50a3f8215d92699ad8fffed3f7e077b3115be0ead58de83527db7f5ce38c.css integrity="sha256-nUpQo/ghXZJpmtj//tP34HezEVvg6tWN6DUn239c44w="><script defer src=/en.search.min.e9399574e0338efedda25383ca7c70e3b516db1c35e1486b65bcdc1237a0686b.js integrity="sha256-6TmVdOAzjv7dolODynxw47UW2xw14UhrZbzcEjegaGs="></script><link rel=alternate type=application/rss+xml href=https://la1r.com/docs/capability-architecture/event-specifications/index.xml title=La1r></head><body><input type=checkbox class=hidden id=menu-control><main class="flex container"><aside class="book-menu fixed"><nav><h2 class=book-brand><a href=https://la1r.com/><span class=brand-title>| &nbsp;&nbsp;La1r</span><img src=/svg/lair-icon-dark.svg alt=Logo></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64><div class="book-search-spinner spinner hidden"></div><ul id=book-search-results></ul></div><ul class=pre-inject-menu><li><strong><a href=/>La1r</a></strong></li></ul><ul><li><a href=/docs/capability-architecture/>Capability Architecture</a><ul><li><a href=/docs/capability-architecture/event-specifications/ class=active>Event Specifications</a><ul></ul></li><li><a href=/docs/capability-architecture/governance-catalogs/>Governance Catalogs</a><ul></ul></li></ul></li><li><a href=/docs/technical-architecture/>Technical Architecture</a><ul><li><a href=/docs/technical-architecture/application-architecture/>Application Architecture</a><ul></ul></li><li><a href=/docs/technical-architecture/data-architecture/>Data Architecture</a><ul></ul></li><li><a href=/docs/technical-architecture/infrastructure-architecture/>Infrastructure Architecture</a><ul><li><a href=/docs/technical-architecture/infrastructure-architecture/deployment-architecture/>Deployment Architecture</a><ul></ul></li><li><a href=/docs/technical-architecture/infrastructure-architecture/storage-architecture/>Storage Architecture</a><ul></ul></li><li><a href=/docs/technical-architecture/infrastructure-architecture/network-architecture/>Network Architecture</a><ul></ul></li></ul></li><li><a href=/docs/technical-architecture/security-architecture/>Security Architecture</a><ul></ul></li></ul></li><li><a href=/docs/planning/>Planning</a><ul></ul></li></ul></nav><script>(function(){var menu=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(event){localStorage.setItem("menu.scrollTop",menu.scrollTop);});menu.scrollTop=localStorage.getItem("menu.scrollTop");})();</script></aside><div class=book-page><header class="flex align-center justify-between book-header"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Event Specifications</strong></header><article class=markdown><h1 id=event-specifications>Event Specifications</h1><p>The event specifications are a exhaustive list of specifications to which any event should conform.
With specifying this, decoupled and predictable interactions between services can be achieved.</p><p>These types of event specifications are currently defined:</p><ul><li><strong>Content specifications</strong> - Specifications putting requirements on the content of the event</li><li><strong>Attribute specifications</strong> - Specifications putting requirements on the attributes of an event</li></ul><h2 id=content-specifications>Content specifications</h2><ol><li>All content of an event should be structured in JSON format</li><li>There cannot be duplicate data between content and attribute data</li><li>All events should contain a Unix epoch timestamp with Amsterdam as timezone, &ldquo;unixts&rdquo; should be formated as <code>%i</code></li><li>All events should contain an &ldquo;origin&rdquo; reference (e.g. &ldquo;automated/face-recognition/1&rdquo;)</li><li>The payload of an event can reference external data with &ldquo;payload&rdquo; or can contain string or blob information:<ul><li>Direct string, blob or other payload formats such as a JSON object</li><li>Direct source path in cephFS (spoofed until ceph is implemented)</li><li>Direct protocol link (e.g. tcp://videostream1.bas)</li><li>Hyperlink (e.g. <a href=https://videostream1.la1r.com>https://videostream1.la1r.com</a>)</li></ul></li></ol><h3 id=content-examples>Content Examples</h3><ul><li><p><strong>Example 1</strong>, a payload with a link</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json>{
    <span style=color:#f92672>&#34;unixts&#34;</span> : <span style=color:#ae81ff>1578157000</span>,
    <span style=color:#f92672>&#34;origin&#34;</span> : <span style=color:#e6db74>&#34;manual/light-switch/6&#34;</span>,
    <span style=color:#f92672>&#34;payload&#34;</span> : <span style=color:#e6db74>&#34;tcp://videostream1.la1r.com&#34;</span>

}
</code></pre></div></li><li><p><strong>Example 2</strong>, a payload with a JSON blob</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json>{
    <span style=color:#f92672>&#34;unixts&#34;</span> : <span style=color:#ae81ff>1577157000</span>,
    <span style=color:#f92672>&#34;origin&#34;</span> : <span style=color:#e6db74>&#34;automated/picture-on-login/pc-1&#34;</span>,
    <span style=color:#f92672>&#34;payload&#34;</span> : {
        <span style=color:#f92672>&#34;online-time-seconds&#34;</span> : <span style=color:#ae81ff>3212</span>,
        <span style=color:#f92672>&#34;capture-location&#34;</span> : <span style=color:#e6db74>&#34;/captures/temp/weekly-cleaned/picture-on-login/pc-1/1.jpeg&#34;</span>
    }

}
</code></pre></div></li></ul><h2 id=attribute-specifications>Attribute specifications</h2><ol><li>The topic modelling standard should be applied on any event published</li><li>Attributes need to be as specific as possible, it should not attempt to group multiple entities because this can be achieved by more advanced queries in the event bus protocol by the use of wildcards.</li></ol><h3 id=topic-modelling-standard>Topic modelling standard</h3><p>Topic modelling is a conceptual architectural decision which should be made very conscious of future extensions.
Large refactor movements in the conceptual structure of an Event bus can have a major change impact because many applications need to change their way of interacting.</p><h3 id=what-needs-to-be-captured-in-topics>What needs to be captured in topics</h3><p>The following things arose while brainstorming about what should be captured in a La1r structured event bus:</p><blockquote><p>This list will probably be extended in the (near) future</p></blockquote><ul><li>Any of the flow types<ul><li>Actuator - such as lights that can dim of switch, these can be binary, stepped or by value.</li><li>Sensor - such as temperature, presence, location or humidity sensors</li><li>Intent - this can be behavior, derived from manual input from a person, or based on automated (AI) analytics</li></ul></li><li>Location specificity - is something specific for a location (in the la1r / outside the la1r)? Numbering with &ldquo;-%i&rdquo; as template. &ldquo;-&rdquo; if not location specific.</li><li>Person or device specificity - is something specific for a person or device? Numbering with &ldquo;-%i&rdquo; as template. &ldquo;-&rdquo; if not person or device specific.</li></ul><h3 id=topic-hierarchy>Topic hierarchy</h3><p>Taking this into consideration, all events in the structured event bus need to following this topic hierarchy (all lower case, without spaces or special characters), either indirect by translation from the raw event bus or direct when considering these standards:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>&lt;flow type&gt;/&lt;Location specification&gt;/&lt;Person or device specification&gt;
</code></pre></div><h4 id=examples-of-hierarchy-usage>Examples of hierarchy usage</h4><ul><li><p>Example 1 - turing off light 1 in the living room</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>actuator/living-room/lightswitch-1
</code></pre></div></li><li><p>Example 2 - security camera 1 sensing an unidentified person</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>sensor/front-door/doorbel-camera-1
</code></pre></div></li><li><p>Example 3 - analysis algo 1 predicts an intent to shutdown all lights in the backyard</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>intent/backyard/lightswitch-all
</code></pre></div></li></ul></article><div class="book-footer justify-between"><div><a class="flex align-center" href=https://github.com/basraven/la1r/commit/7524927ea62c7404e06134bc352e3c01adbf0241 title="Last modified by Sebastiaan Raven | Jun 14, 2020" target=_blank><img src=/svg/calendar.svg class=book-icon alt=Calendar>
<span>Jun 14, 2020</span></a></div></div></div><aside class="book-toc levels-3 fixed"><nav id=TableOfContents><ul><li><a href=#event-specifications>Event Specifications</a><ul><li><a href=#content-specifications>Content specifications</a><ul><li><a href=#content-examples>Content Examples</a></li></ul></li><li><a href=#attribute-specifications>Attribute specifications</a><ul><li><a href=#topic-modelling-standard>Topic modelling standard</a></li><li><a href=#what-needs-to-be-captured-in-topics>What needs to be captured in topics</a></li><li><a href=#topic-hierarchy>Topic hierarchy</a></li></ul></li></ul></li></ul></nav></aside></main></body></html>