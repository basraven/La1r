<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Storage Architecture"><meta property="og:title" content><meta property="og:description" content><meta property="og:type" content="website"><meta property="og:url" content="https://la1r.com/docs/technical-architecture/infrastructure-architecture/storage-architecture/"><title>Storage Architecture | La1r</title><link rel=icon href=/favicon.ico type=image/x-icon><link rel=stylesheet href=/book.min.9d4a50a3f8215d92699ad8fffed3f7e077b3115be0ead58de83527db7f5ce38c.css integrity="sha256-nUpQo/ghXZJpmtj//tP34HezEVvg6tWN6DUn239c44w="><script defer src=/en.search.min.0de907716081366d2f9efcc0e8f0f73139942aa653dbdbc1485573bac9d6bbd8.js integrity="sha256-DekHcWCBNm0vnvzA6PD3MTmUKqZT29vBSFVzusnWu9g="></script><link rel=alternate type=application/rss+xml href=https://la1r.com/docs/technical-architecture/infrastructure-architecture/storage-architecture/index.xml title=La1r></head><body><input type=checkbox class=hidden id=menu-control><main class="flex container"><aside class="book-menu fixed"><nav><h2 class=book-brand><a href=https://la1r.com/><span class=brand-title>| &nbsp;&nbsp;La1r</span><img src=/svg/lair-icon-dark.svg alt=Logo></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64><div class="book-search-spinner spinner hidden"></div><ul id=book-search-results></ul></div><ul class=pre-inject-menu><li><strong><a href=/>La1r</a></strong></li></ul><ul><li><a href=/docs/capability-architecture/>Capability Architecture</a><ul><li><a href=/docs/capability-architecture/event-specifications/>Event Specifications</a><ul></ul></li><li><a href=/docs/capability-architecture/governance-catalogs/>Governance Catalogs</a><ul></ul></li></ul></li><li><a href=/docs/technical-architecture/>Technical Architecture</a><ul><li><a href=/docs/technical-architecture/application-architecture/>Application Architecture</a><ul></ul></li><li><a href=/docs/technical-architecture/data-architecture/>Data Architecture</a><ul></ul></li><li><a href=/docs/technical-architecture/infrastructure-architecture/>Infrastructure Architecture</a><ul><li><a href=/docs/technical-architecture/infrastructure-architecture/deployment-architecture/>Deployment Architecture</a><ul></ul></li><li><a href=/docs/technical-architecture/infrastructure-architecture/storage-architecture/ class=active>Storage Architecture</a><ul></ul></li><li><a href=/docs/technical-architecture/infrastructure-architecture/network-architecture/>Network Architecture</a><ul></ul></li></ul></li><li><a href=/docs/technical-architecture/security-architecture/>Security Architecture</a><ul></ul></li></ul></li><li><a href=/docs/planning/>Planning</a><ul></ul></li></ul></nav><script>(function(){var menu=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(event){localStorage.setItem("menu.scrollTop",menu.scrollTop);});menu.scrollTop=localStorage.getItem("menu.scrollTop");})();</script></aside><div class=book-page><header class="flex align-center justify-between book-header"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Storage Architecture</strong></header><article class=markdown><h1 id=storage-architecture>Storage Architecture</h1><p>Storage architecture can be a complicated topic when working with (Bare Metal) Kubernetes clusters.
There are a lot of War stories of organizations unable to restore their storage solution, e.g. in a complex RAID setup on in a distributed storage solutions such as Ceph, GlusterFS or StorageOS.</p><p>It took a significant amount of time to weigh the pros and cons of these solutions, but eventually I went for the &ldquo;safest&rdquo; solution, at least a solution which could not produce unrestoreable storage solutions as mentioned before:</p><ul><li>Dynamically provisioned NFS storage in Kubernetes</li></ul><h2 id=storage-tiers>Storage Tiers</h2><p>A few predefined folder structures are used in this setup, each folder to simulate To simulate the behavior of more complex storage solutions:</p><table><thead><tr><th><strong>B</strong>ackup</th><th><strong>V</strong>olatility</th><th><strong>S</strong>peed</th></tr></thead><tbody><tr><td>- 1: Backed-up (<strong>H</strong>igh <strong>A</strong>vailability)<br>- 2: Not Backed-up (<strong>N</strong>ormal <strong>A</strong>vailability)</td><td>- 1: Persistent, retained indefinite<br>- 2: Volatile, removed after 2 weeks</td><td>- 1: High speed SSD storage<br>- 2: Normal speed HDD Storage<br>- 3: Slower speed HDD storage</td></tr></tbody></table><h3 id=instances>Instances</h3><table><thead><tr><th>Class Code</th><th>Implemented server(s)</th><th><strong>B</strong>ackup</th><th><strong>V</strong>olatility</th><th><strong>S</strong>peed</th><th>Hostpath</th></tr></thead><tbody><tr><td>111</td><td>1: linux-wayne</td><td>1</td><td>1</td><td>1</td><td>/mnt/ssd/ha/&lt;service_name></td></tr><tr><td>211</td><td>1: linux-wayne</td><td>2</td><td>1</td><td>1</td><td>/mnt/ssd/na/&lt;service_name></td></tr><tr><td>221</td><td>1: linux-wayne</td><td>2</td><td>2</td><td>1</td><td>/mnt/ssd/tmp/&lt;service_name></td></tr><tr><td>112</td><td>1: linux-wayne</td><td>1</td><td>1</td><td>2</td><td>/mnt/hdd/ha/&lt;service_name></td></tr><tr><td>212</td><td>1: linux-wayne</td><td>2</td><td>1</td><td>2</td><td>/mnt/hdd/na/&lt;service_name></td></tr><tr><td>222</td><td>1: linux-wayne</td><td>2</td><td>2</td><td>2</td><td>/mnt/hdd/tmp/&lt;service_name></td></tr><tr><td>113</td><td>2: 50centos</td><td>1</td><td>1</td><td>3</td><td>/mnt/slhdd/ha/&lt;service_name></td></tr><tr><td>213</td><td>2: 50centos</td><td>2</td><td>1</td><td>3</td><td>/mnt/slhdd/na/&lt;service_name></td></tr><tr><td>223</td><td>2: 50centos</td><td>2</td><td>2</td><td>1</td><td>/mnt/slhdd/tmp/&lt;service_name></td></tr></tbody></table></article><div class="book-footer justify-between"><div><a class="flex align-center" href=https://github.com/basraven/la1r/commit/73d4faca1b435027e70165b8410f0877e036dbc5 title="Last modified by Sebastiaan Raven | Aug 3, 2020" target=_blank><img src=/svg/calendar.svg class=book-icon alt=Calendar>
<span>Aug 3, 2020</span></a></div></div></div><aside class="book-toc levels-3 fixed"><nav id=TableOfContents><ul><li><a href=#storage-architecture>Storage Architecture</a><ul><li><a href=#storage-tiers>Storage Tiers</a><ul><li><a href=#instances>Instances</a></li></ul></li></ul></li></ul></nav></aside></main></body></html>